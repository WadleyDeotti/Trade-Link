<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Produto - TradeLink</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="css/produto.css">
</head>
<body>
	<div class="dashboard-container">
		<div class="sidebar">
			<div class="logo">
				<img src="../fornecedores/logo.png" alt="TradeLink">
			</div>
			<nav>
				<ul>
					<li><a href="inicial"><i class="fas fa-home"></i> Início</a></li>
					<li><a href="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
					<li><a href="fornecedores"><i class="fas fa-user"></i> Perfil</a></li>
					<li><a href="pedidos"><i class="fas fa-file-invoice"></i> Pedidos/Vendas</a></li>
					<li><a href="historico"><i class="fas fa-history"></i> Histórico</a></li>
					<li><a href="mensagens"><i class="fas fa-envelope"></i> Mensagens</a></li>
					<li class="active"><a href="produto"><i class="fas fa-box"></i> Produtos</a></li>
					<li><a href="categoria"><i class="fas fa-tags"></i> Categorias</a></li>
					<li><a href="configuracoes"><i class="fas fa-cog"></i> Configurações</a></li>
				</ul>
			</nav>
		</div>

		<div class="main-content">
			<header>
				<h1><i class="fas fa-box"></i> Produto</h1>
				<div class="user-info">
					<span>TradeLink</span>
					<img src="../fornecedores/profile.jpg" alt="Usuário">
				</div>
			</header>

			<div class="content">
				<% if (produto) { %>
					<!-- Página de detalhes do produto -->
					<div class="container">
						<nav class="breadcrumbs">Início &gt; <%= produto.categoria %> &gt; <%= produto.nome_produto %></nav>

						<section class="product">
							<div class="gallery">
								<div class="main-img" id="mainImg">
									<img src="https://via.placeholder.com/480x420?text=<%= produto.nome_produto %>" alt="<%= produto.nome_produto %>" style="max-width:100%;max-height:100%;object-fit:contain">
								</div>
							</div>

							<div class="details">
								<div class="title"><%= produto.nome_produto %></div>
								<div class="meta">
									<div class="seller">Vendido por <%= produto.nome_fantasia %></div>
								</div>

								<div class="price">R$ <%= parseFloat(produto.preco).toFixed(2) %></div>

								<% if (produto.descricao) { %>
									<div class="description">
										<p><%= produto.descricao %></p>
									</div>
								<% } %>
							</div>

							<aside class="side">
								<div class="info"><strong>Disponibilidade:</strong> <%= produto.disponivel ? 'Em estoque' : 'Indisponível' %></div>
								<div class="info"><strong>Categoria:</strong> <%= produto.categoria %></div>
								<% if (produto.telefone) { %>
									<div class="info"><strong>Contato:</strong> <%= produto.telefone %></div>
								<% } %>
							</aside>
						</section>

						<% if (produtosRelacionados && produtosRelacionados.length > 0) { %>
							<section class="section">
								<h3>Produtos relacionados</h3>
								<div class="related">
									<% produtosRelacionados.forEach(prod => { %>
										<div class="card" onclick="window.location.href='/produto/<%= prod.id_produto %>'" style="cursor: pointer;">
											<img src="https://via.placeholder.com/140?text=<%= prod.nome_produto.substring(0,3) %>" alt="<%= prod.nome_produto %>" style="width:100%;height:90px;object-fit:cover;margin-bottom:8px">
											<div style="font-size:14px;font-weight:600"><%= prod.nome_produto %></div>
											<div style="color:var(--muted);font-size:13px">R$ <%= parseFloat(prod.preco).toFixed(2) %></div>
										</div>
									<% }) %>
								</div>
							</section>
						<% } %>
					</div>
				<% } else if (produtos && produtos.length > 0) { %>
					<!-- Lista de produtos -->
					<div class="container">
						<h2>Todos os Produtos</h2>
						<div class="produtos-grid">
							<% produtos.forEach(prod => { %>
								<div class="produto" onclick="window.location.href='/produto/<%= prod.id_produto %>'" style="cursor: pointer; border: 1px solid #ddd; padding: 15px; margin: 10px; border-radius: 8px;">
									<div class="imagem" style="height: 150px; background: #f5f5f5; margin-bottom: 10px; display: flex; align-items: center; justify-content: center;">
										<span style="color: #999;">Imagem</span>
									</div>
									<h3><%= prod.nome_produto %></h3>
									<p class="preco" style="font-size: 18px; font-weight: bold; color: #2c5aa0;">R$ <%= parseFloat(prod.preco).toFixed(2) %></p>
									<p class="fornecedor" style="color: #666;">Por: <%= prod.nome_fantasia %></p>
									<p class="categoria" style="color: #888; font-size: 14px;">Categoria: <%= prod.categoria %></p>
								</div>
							<% }) %>
						</div>
					</div>
				<% } else { %>
					<!-- Página vazia -->
					<div class="container">
						<div style="text-align: center; padding: 50px;">
							<h2>Nenhum produto encontrado</h2>
							<p>Não há produtos disponíveis no momento.</p>
							<a href="/produtos" style="color: #2c5aa0; text-decoration: none;">Ver todos os produtos</a>
						</div>
					</div>
				<% } %>
			</div>
		</div>
	</div>

	<script src="JavaScript/produto.js" defer></script>
</body>
</html>