<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Categorias - TradeLink</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/categoria.css">
</head>

<body>
  <div class="dashboard-container">
    <div class="sidebar">
      <div class="logo">
        <img src="../fornecedores/logo.png" alt="TradeLink">
      </div>
      <nav>
        <ul>
          <li><a href="inicial"><i class="fas fa-home"></i> Produtos</a></li>
          <li><a href="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
          <li><a href="fornecedores"><i class="fas fa-user"></i> Perfil</a></li>
          <li><a href="pedidos"><i class="fas fa-file-invoice"></i> Pedidos/Vendas</a></li>
          <li><a href="historico"><i class="fas fa-history"></i> Histórico</a></li>
          <li><a href="chat"><i class="fas fa-robot"></i> Chat IA</a></li>
          <li class="active"><a href="categoria"><i class="fas fa-tags"></i> Categorias</a></li>
          <li><a href="configuracoes"><i class="fas fa-cog"></i> Configurações</a></li>
        </ul>
      </nav>
    </div>

    <div class="main-content">
      <header>
        <h1><i class="fas fa-tags"></i> Categorias</h1>
        <div class="user-info">
          <span>TradeLink</span>
          <img src="images/profile.jpg" alt="Usuário">
        </div>
      </header>

      <div class="content">
        <div class="search-section">
          <div class="search-wrap">
            <input class="search" placeholder="Pesquisar produtos..." aria-label="Pesquisar">
            <i class="fas fa-search search-icon"></i>
          </div>
        </div>

        <div class="main-layout">
          <aside class="filtros">
            <h3><i class="fas fa-filter"></i> Filtros</h3>

            <div class="filter-section">
              <h4><i class="fas fa-list"></i> Categoria</h4>
              <select id="categoria-select" class="filter-select">
                <% if (typeof categorias !== 'undefined' && categorias.length > 0) { %>
                  <% categorias.forEach(cat => { %>
                    <option value="<%= cat %>" <%= cat === categoriaAtual ? 'selected' : '' %>>
                      <%= cat.charAt(0).toUpperCase() + cat.slice(1) %>
                    </option>
                  <% }) %>
                <% } else { %>
                  <option value="eletronicos">Eletrônicos</option>
                  <option value="roupas">Roupas</option>
                  <option value="casa">Casa e Jardim</option>
                  <option value="esportes">Esportes</option>
                  <option value="livros">Livros</option>
                <% } %>
              </select>
            </div>

            <div class="filter-section">
              <h4><i class="fas fa-dollar-sign"></i> Preço</h4>
              <div class="price-range">
                <input type="number" id="preco-min" placeholder="Min" min="0" class="price-input">
                <span>até</span>
                <input type="number" id="preco-max" placeholder="Max" min="0" class="price-input">
              </div>
              <button id="aplicar-preco" class="filter-btn"><i class="fas fa-check"></i> Aplicar</button>
            </div>

            <div class="filter-section">
              <h4><i class="fas fa-boxes"></i> Quantidade</h4>
              <div class="quantity-range">
                <input type="number" id="qtd-min" placeholder="Min" min="0" class="quantity-input">
                <span>até</span>
                <input type="number" id="qtd-max" placeholder="Max" min="0" class="quantity-input">
              </div>
              <button id="aplicar-qtd" class="filter-btn"><i class="fas fa-check"></i> Aplicar</button>
            </div>

            <div class="filter-section">
              <h4><i class="fas fa-star"></i> Outros</h4>
              <div class="filter-group">
                <label><input type="checkbox" id="promocoes"> <i class="fas fa-percentage"></i> Promoções</label>
                <label><input type="checkbox" id="frete-gratis"> <i class="fas fa-shipping-fast"></i> Frete
                  grátis</label>
                <label><input type="checkbox" id="mais-vendidos"> <i class="fas fa-fire"></i> Mais vendidos</label>
              </div>
            </div>
          </aside>

          <section class="conteudo">
            <h2 id="cat_title"><i class="fas fa-laptop" id="cat_icon"></i> Categoria: <span
                id="cat_name"><%= typeof categoriaAtual !== 'undefined' ? categoriaAtual.charAt(0).toUpperCase() + categoriaAtual.slice(1) : 'Eletrônicos' %></span></h2>
            <div class="produtos-grid" id="produtos-container">
              <% if (typeof produtos !== 'undefined' && produtos.length > 0) { %>
                <% produtos.forEach(prod => { %>
                  <div class="produto" data-preco="<%= prod.preco %>" data-categoria="<%= prod.categoria %>"
                    style="cursor: pointer;" onclick="window.location.href='/produto/<%= prod.id_produto %>'">

                    <div class="imagem"></div>
                    <div class="info">
                      <p class="nome">
                        <%= prod.nome_produto %>
                      </p>
                      <p class="preco">R$ <%= parseFloat(prod.preco).toFixed(2) %>
                      </p>

                      <% if (prod.descricao) { %>
                        <p class="descricao">
                          <%= prod.descricao.substring(0, 60) %>...
                        </p>
                      <% } %>

                      <% if (prod.disponivel) { %>
                        <p class="disponibilidade" style="color: green;">Disponível</p>
                      <% } else { %>
                        <p class="disponibilidade" style="color: red;">Indisponível</p>
                      <% } %>
                    </div>
                  </div>
                <% }) %>
              <% } else { %>
                <div class="no-products">
                  <p>Nenhum produto encontrado nesta categoria.</p>
                </div>
              <% } %>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <script src="JS/categoria.js"></script>
</body>

</html>